!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.sockette=t()}(this,function(){function n(){}return function(o,e){var c,t=0,s={},i=(e=e||{}).maxAttempts||1/0;return s.open=function(){(c=new WebSocket(o,e.protocols||[])).onmessage=e.onmessage||n,c.onopen=function(o){(e.onopen||n)(o),t=0},c.onclose=function(o){1e3===o.code||1005===o.code||s.reconnect(o),(e.onclose||n)(o)},c.onerror=function(o){o&&"ECONNREFUSED"===o.code?s.reconnect(o):(e.onerror||n)(o)}},s.reconnect=function(o){t++<i?setTimeout(function(){(e.onreconnect||n)(o),s.open()},e.timeout||1e3):(e.onmaximum||n)(o)},s.json=function(n){c.send(JSON.stringify(n))},s.send=function(n){c.send(n)},s.close=function(n,o){c.close(n||1e3,o)},s.open(),s};});